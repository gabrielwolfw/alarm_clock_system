#include "timer.h"

void init_timer(){ //Valores iniciales tanto del reloj como alarma
	current_hours = 0;
	current_minutes = 0;
	alarm_flag = 0;
	alarm_hours = 0;
	alarm_minutes = 0;
}

void set_time(int hours, int minutes){ //Configurar el reloj
	current_hours = hours % MAX_HOURS;
	current_minutes = minutes % MAX_MINUTES;
}

void set_alarm(int hours, int minutes){ //Configurar el reloj
	alarm_hours = hours % MAX_HOURS;
	alarm_minutes = minutes % MAX_MINUTES;
	alarm_flag = 1;
}


void update_clock() { //Actualizar el tiempo en el reloj
    if (++current_minutes > MAX_MINUTES) {
        current_minutes = 0;
        if (++current_hours > MAX_HOURS) {
            current_hours = 0;
        }
    }

    if (alarm_flag && current_hours == alarm_hours && current_minutes == alarm_minutes) {
        trigger_alarm();
    }
}

void trigger_alarm(){
	//Manejo del sonido de la alarma por 30 segundos
}
